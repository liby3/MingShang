package GameRule;

import javafx.scene.shape.Rectangle;
import Player.PlayerActions;
import Roles.Character;




public class Control {

	public final static int areaAvailable = 0;
	public final static int areaUnavailable = 1;
	
	public final static int UP = 1;
	public final static int DOWN = 2;
	public final static int LEFT = 3;
	public final static int RIGHT = 4;
	
    public Control()  {
    	;
    }
    
    public void up(int step, int[][] theTeam, int[][] numberOfRoles, Character[][] rolesImage, int i, int j) {
    	theTeam[i - step][j] = theTeam[i][j];
    	theTeam[i][j] = 0;
        numberOfRoles[i - step][j] = numberOfRoles[i][j];
        numberOfRoles[i][j] = 0;
        rolesImage[i - step][j].getCharacterView().setImage(rolesImage[i][j].getCharacterView().getImage());
        rolesImage[i][j].getCharacterView().setImage(null);
    }
    
    public void down(int step, int[][] theTeam, int[][] numberOfRoles, Character[][] rolesImage, int i, int j) {
    	theTeam[i + step][j] = theTeam[i][j];
        theTeam[i][j] = 0;
        numberOfRoles[i + step][j] = numberOfRoles[i][j];
        numberOfRoles[i][j] = 0;
        rolesImage[i + step][j].getCharacterView().setImage(rolesImage[i][j].getCharacterView().getImage());
        rolesImage[i][j].getCharacterView().setImage(null);
    }

    public void left(int step, int[][] theTeam, int[][] numberOfRoles, Character[][] rolesImage, int i, int j) {
    	theTeam[i][j - step] = theTeam[i][j];
        theTeam[i][j] = 0;
        numberOfRoles[i][j - step] = numberOfRoles[i][j];
        numberOfRoles[i][j] = 0;
        rolesImage[i][j - step].getCharacterView().setImage(rolesImage[i][j].getCharacterView().getImage());
        rolesImage[i][j].getCharacterView().setImage(null);
    }
    
    public void right(int step, int[][] theTeam, int[][] numberOfRoles, Character[][] rolesImage, int i, int j) {
    	theTeam[i][j + step] = theTeam[i][j];
        theTeam[i][j] = 0;
        numberOfRoles[i][j + step] = numberOfRoles[i][j];
        numberOfRoles[i][j] = 0;
        rolesImage[i][j + step].getCharacterView().setImage(rolesImage[i][j].getCharacterView().getImage());
        rolesImage[i][j].getCharacterView().setImage(null);
    }
    
    //改变界面上rectangles可否点击
    public void setDisable(int[][] theTeam, int player, Rectangle[][] rectangles) {
    	if(player == PlayerActions.LEFT_PLAYER) {
    		for (int i = 0; i < 10; i++) {
    			for (int j = 0; j < 10; j++) {
    				if(theTeam[i][j] == -1)
    					rectangles[i][j].setDisable(true);
    				else
    					rectangles[i][j].setDisable(false);
    			}
    		}
    	}
    	else {
    		for (int i = 0; i < 10; i++) {
    			for (int j = 0; j < 10; j++) {
    				if(theTeam[i][j] == 1)
    					rectangles[i][j].setDisable(true);
    				else
    					rectangles[i][j].setDisable(false);
    			}
    		}
    	}
    }

    //判断当前界面是否已点击
    public boolean isClick(Rectangle[][] rectangle) {
        int count = 0;
        for (int i = 0; i < 10; i++) {
            for (int j = 0; j < 10; j++) {
                if (rectangle[i][j].getOpacity() < 0.2) {
                    count++;
                }
            }
        }
        if (count == 100) {
            return false;
        }
        else
            return true;
    }

}